<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guides Hub</title>
  <link rel="icon" type="image/png" href="guide-icon-64.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/hub.css">
</head>
<body>
  <header class="hub-header">
    <h1 class="hub-title">Guides Hub</h1>
    <div class="search-container">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </svg>
      <input type="search" class="search-input" placeholder="Search guides..." aria-label="Search guides">
      <div class="search-results" role="listbox" aria-label="Search results"></div>
    </div>
  </header>

  <main class="hub-main">
    <div class="category-grid" id="category-grid">
      <!-- Categories will be rendered by JavaScript -->
    </div>
  </main>

  <footer class="hub-footer">
    Personal documentation hub
  </footer>

  <!-- Embedded guides data for file:// compatibility -->
  <script id="guides-data" type="application/json">
{
  "categories": [
    {
      "id": "app-use",
      "label": "App Use & Maintenance",
      "icon": "settings",
      "color": "#5b7fb5",
      "children": [
        {
          "id": "draft-diff-checker",
          "label": "Draft Diff Checker",
          "href": "guides/apps/draft-diff-checker/index.html",
          "description": "Local browser tool for comparing student draft revisions"
        },
        {
          "id": "stremio-recommender",
          "label": "Stremio Recommender",
          "href": "guides/apps/stremio-recommender/index.html",
          "description": "AI-powered personalized recommendations for Stremio",
          "children": [
            { "label": "Overview", "href": "guides/apps/stremio-recommender/index.html" },
            { "label": "Daily Use", "href": "guides/apps/stremio-recommender/daily-use.html" },
            { "label": "Dashboard", "href": "guides/apps/stremio-recommender/dashboard.html" },
            { "label": "Managing Recommendations", "href": "guides/apps/stremio-recommender/managing.html" },
            { "label": "Troubleshooting", "href": "guides/apps/stremio-recommender/troubleshooting.html" }
          ]
        }
      ]
    },
    {
      "id": "github",
      "label": "GitHub",
      "icon": "git-branch",
      "color": "#8b7aaa",
      "children": [
        {
          "id": "ssh-setup",
          "label": "GitHub SSH Setup",
          "href": "guides/github/ssh-setup/index.html",
          "description": "Setting up SSH keys for multiple GitHub accounts"
        },
        {
          "id": "vscode-github-setup",
          "label": "VS Code GitHub Setup",
          "href": "guides/github/vscode-github-setup/index.html",
          "description": "Configuring VS Code to push and pull from multiple GitHub accounts"
        }
      ]
    },
    {
      "id": "linux",
      "label": "Linux Help",
      "icon": "terminal",
      "color": "#9a6a8a",
      "children": [
        {
          "id": "quickemu-windows",
          "label": "Quickemu Windows VM",
          "href": "guides/linux/quickemu-windows/index.html",
          "description": "Setting up a Windows 11 VM using Quickemu"
        },
        {
          "id": "claude-code",
          "label": "Claude Code for Linux",
          "href": "guides/linux/claude-code/index.html",
          "description": "Installing and using Claude Code on Linux",
          "children": [
            { "label": "Overview", "href": "guides/linux/claude-code/index.html" },
            { "label": "Installation", "href": "guides/linux/claude-code/installation.html" },
            { "label": "Usage", "href": "guides/linux/claude-code/usage.html" },
            { "label": "Project Memory", "href": "guides/linux/claude-code/project-memory.html" },
            { "label": "Prompting", "href": "guides/linux/claude-code/prompting.html" },
            { "label": "Advanced", "href": "guides/linux/claude-code/advanced.html" },
            { "label": "Troubleshooting", "href": "guides/linux/claude-code/troubleshooting.html" }
          ]
        },
        {
          "id": "app-shortcuts",
          "label": "App Menu Shortcuts",
          "href": "guides/linux/app-shortcuts/index.html",
          "description": "Create launcher shortcuts for local HTML applications",
          "children": [
            { "label": "Overview", "href": "guides/linux/app-shortcuts/index.html" },
            { "label": "Choosing an Icon", "href": "guides/linux/app-shortcuts/icons.html" },
            { "label": "Troubleshooting", "href": "guides/linux/app-shortcuts/troubleshooting.html" }
          ]
        },
        {
          "id": "portable-app-shortcuts",
          "label": "Portable App Shortcuts",
          "href": "guides/linux/portable-app-shortcuts/index.html",
          "description": "Add AppImages, tarballs, and portable binaries to the app menu",
          "children": [
            { "label": "Overview", "href": "guides/linux/portable-app-shortcuts/index.html" },
            { "label": "AppImages", "href": "guides/linux/portable-app-shortcuts/appimages.html" },
            { "label": "Tarballs", "href": "guides/linux/portable-app-shortcuts/tarballs.html" },
            { "label": "Icons", "href": "guides/linux/portable-app-shortcuts/icons.html" },
            { "label": "Troubleshooting", "href": "guides/linux/portable-app-shortcuts/troubleshooting.html" }
          ]
        }
      ]
    },
    {
      "id": "my-apps",
      "label": "My Apps",
      "icon": "download",
      "color": "#3d7a7a",
      "children": [
        {
          "id": "site-sync",
          "label": "Site Sync",
          "href": "guides/my-apps/site-sync/index.html",
          "description": "GUI tool for pulling GitHub repos to your local machine"
        }
      ]
    },
    {
      "id": "webdev",
      "label": "Web Dev",
      "icon": "code",
      "color": "#6a9a8a",
      "children": [
        {
          "id": "creating-guides",
          "label": "Creating New Guides",
          "href": "guides/webdev/creating-guides/index.html",
          "description": "How to use AI to create new pages for this site"
        },
        {
          "id": "css-cheat-sheet",
          "label": "CSS Cheat Sheet",
          "href": "guides/webdev/css-cheat-sheet/index.html",
          "description": "Quick reference guide to CSS selectors, properties, and patterns"
        },
        {
          "id": "vibe-coding",
          "label": "Vibe Coding with Claude Code",
          "href": "guides/webdev/vibe-coding/index.html",
          "description": "Natural-language-driven development in VS Code",
          "children": [
            { "label": "Overview", "href": "guides/webdev/vibe-coding/index.html" },
            { "label": "Setup", "href": "guides/webdev/vibe-coding/setup.html" },
            { "label": "Usage", "href": "guides/webdev/vibe-coding/usage.html" },
            { "label": "Tips", "href": "guides/webdev/vibe-coding/tips.html" },
            { "label": "Troubleshooting", "href": "guides/webdev/vibe-coding/troubleshooting.html" }
          ]
        }
      ]
    }
  ]
}
  </script>

  <script>
    // Icon definitions
    const icons = {
      download: '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line></svg>',
      settings: '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>',
      'git-branch': '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="6" x2="6" y1="3" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path></svg>',
      terminal: '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg>',
      code: '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>'
    };

    // Color mapping
    const colorMap = {
      '#3d7a7a': 'teal',
      '#5b7fb5': 'blue',
      '#8b7aaa': 'purple',
      '#9a6a8a': 'plum',
      '#a56a7a': 'rose',
      '#6a9a8a': 'sage'
    };

    // Load guides data from embedded JSON
    function getGuidesData() {
      const dataElement = document.getElementById('guides-data');
      return JSON.parse(dataElement.textContent);
    }

    // Render categories
    function loadCategories() {
      try {
        const data = getGuidesData();
        renderCategories(data.categories);
        initSearch(data);
      } catch (error) {
        console.error('Failed to load categories:', error);
        document.getElementById('category-grid').innerHTML = `
          <p style="color: var(--text-muted);">Failed to load categories.</p>
        `;
      }
    }

    function renderCategories(categories) {
      const grid = document.getElementById('category-grid');
      grid.innerHTML = categories.map(cat => renderCategoryCard(cat)).join('');
    }

    function renderCategoryCard(category) {
      const colorClass = colorMap[category.color] || 'blue';
      const icon = icons[category.icon] || icons.code;

      let childrenHtml = '';

      if (category.children && category.children.length > 0) {
        childrenHtml = '<ul class="category-children">';
        childrenHtml += category.children.map(child => renderCategoryChild(child)).join('');
        childrenHtml += '</ul>';
      } else {
        childrenHtml = '<p class="category-empty">No guides yet</p>';
      }

      return `
        <article class="category-card" data-color="${colorClass}">
          <header class="category-header">
            <div class="category-icon">${icon}</div>
            <h2 class="category-name">${escapeHtml(category.label)}</h2>
          </header>
          ${childrenHtml}
        </article>
      `;
    }

    function renderCategoryChild(child) {
      // If child has an href, it's a guide
      if (child.href) {
        return `
          <li class="category-child">
            <a href="${child.href}">${escapeHtml(child.label)}</a>
          </li>
        `;
      }

      // If child has children, it's a subcategory
      if (child.children && child.children.length > 0) {
        let subItems = child.children
          .filter(sub => sub.href || sub.label)
          .slice(0, 3)
          .map(sub => {
            if (sub.href) {
              return `<li class="subcategory-item"><a href="${sub.href}">${escapeHtml(sub.label)}</a></li>`;
            }
            return `<li class="subcategory-item"><span>${escapeHtml(sub.label)}</span></li>`;
          })
          .join('');

        if (child.children.length > 3) {
          subItems += `<li class="subcategory-item"><span class="text-muted">+ ${child.children.length - 3} more</span></li>`;
        }

        return `
          <li class="category-child has-children">
            <span>${escapeHtml(child.label)}</span>
            <ul class="subcategory-list">${subItems}</ul>
          </li>
        `;
      }

      // Empty subcategory
      return `
        <li class="category-child">
          <span class="text-muted">${escapeHtml(child.label)}</span>
        </li>
      `;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Search functionality
    function initSearch(data) {
      const searchInput = document.querySelector('.search-input');
      const resultsContainer = document.querySelector('.search-results');
      const searchIndex = buildSearchIndex(data.categories);

      let debounceTimer;

      searchInput.addEventListener('input', (e) => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
          performSearch(e.target.value, searchIndex, resultsContainer);
        }, 150);
      });

      searchInput.addEventListener('focus', () => {
        if (searchInput.value.trim()) {
          performSearch(searchInput.value, searchIndex, resultsContainer);
        }
      });

      document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !resultsContainer.contains(e.target)) {
          resultsContainer.classList.remove('active');
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          resultsContainer.classList.remove('active');
          searchInput.blur();
        }
      });
    }

    function buildSearchIndex(categories, path = []) {
      const index = [];
      for (const item of categories) {
        if (item.href) {
          index.push({
            title: item.label,
            description: item.description || '',
            href: item.href,
            path: path.join(' > ')
          });
        }
        if (item.children) {
          const newPath = item.label && !item.href ? [...path, item.label] : path;
          index.push(...buildSearchIndex(item.children, newPath));
        }
      }
      return index;
    }

    function performSearch(query, searchIndex, resultsContainer) {
      query = query.trim().toLowerCase();

      if (!query) {
        resultsContainer.classList.remove('active');
        return;
      }

      const results = searchIndex.filter(item => {
        return item.title.toLowerCase().includes(query) ||
               item.description.toLowerCase().includes(query) ||
               item.path.toLowerCase().includes(query);
      });

      if (results.length === 0) {
        resultsContainer.innerHTML = `<div class="search-no-results">No guides found for "${escapeHtml(query)}"</div>`;
      } else {
        resultsContainer.innerHTML = results.slice(0, 10).map(result => `
          <a href="${result.href}" class="search-result-item">
            <div class="search-result-title">${escapeHtml(result.title)}</div>
            <div class="search-result-path">${escapeHtml(result.path)}</div>
          </a>
        `).join('');
      }
      resultsContainer.classList.add('active');
    }

    // Initialize
    loadCategories();
  </script>
</body>
</html>
