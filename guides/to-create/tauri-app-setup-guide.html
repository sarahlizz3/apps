<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tauri App Setup Guide for Linux</title>
    <style>
        :root {
            --bg: #1a1a2e;
            --bg-secondary: #16213e;
            --text: #e8e8e8;
            --text-muted: #a0a0a0;
            --accent: #7c83fd;
            --accent-dim: #5c63dd;
            --success: #4ade80;
            --warning: #fbbf24;
            --code-bg: #0f0f1a;
            --border: #2a2a4a;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 2rem;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--accent);
            border-bottom: 2px solid var(--accent-dim);
            padding-bottom: 0.5rem;
            margin-top: 0;
        }
        
        h2 {
            color: var(--accent);
            margin-top: 2.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        
        h3 {
            color: var(--text);
            margin-top: 1.5rem;
        }
        
        code {
            background: var(--code-bg);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: var(--code-bg);
            padding: 1rem 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid var(--border);
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        .step {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1.25rem 1.5rem;
            margin: 1rem 0;
            border-left: 4px solid var(--accent);
        }
        
        .step-number {
            display: inline-block;
            background: var(--accent);
            color: var(--bg);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: bold;
            margin-right: 0.75rem;
        }
        
        .note {
            background: rgba(124, 131, 253, 0.1);
            border: 1px solid var(--accent-dim);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
        }
        
        .note-title {
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }
        
        .warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
        }
        
        .warning-title {
            font-weight: bold;
            color: var(--warning);
            margin-bottom: 0.5rem;
        }
        
        .success {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid var(--success);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
        }
        
        .success-title {
            font-weight: bold;
            color: var(--success);
            margin-bottom: 0.5rem;
        }
        
        ul {
            padding-left: 1.5rem;
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        a {
            color: var(--accent);
        }
        
        .muted {
            color: var(--text-muted);
        }
        
        .toc {
            background: var(--bg-secondary);
            padding: 1.25rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        
        .toc h3 {
            margin-top: 0;
            color: var(--accent);
        }
        
        .toc ul {
            margin-bottom: 0;
        }
        
        .toc a {
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Tauri App Setup Guide for Linux</h1>
        <p class="muted">Turn your web apps into native desktop applications with proper window management and icons.</p>
        
        <nav class="toc">
            <h3>Contents</h3>
            <ul>
                <li><a href="#prerequisites">Prerequisites Check</a></li>
                <li><a href="#rust">Installing Rust</a></li>
                <li><a href="#system-deps">System Dependencies</a></li>
                <li><a href="#project-setup">Project Setup</a></li>
                <li><a href="#icons">Setting Up Icons</a></li>
                <li><a href="#building">Building the App</a></li>
                <li><a href="#installing">Installing the App</a></li>
                <li><a href="#window-config">Window Configuration</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
            </ul>
        </nav>

        <h2 id="prerequisites">Prerequisites Check</h2>
        
        <p>Before starting, check what you already have installed.</p>
        
        <h3>Check for Rust</h3>
        <pre><code>rustc --version</code></pre>
        <p>If installed, you'll see something like <code>rustc 1.75.0</code>. If not, you'll see "command not found".</p>
        
        <h3>Check for Node.js</h3>
        <pre><code>node --version</code></pre>
        <p>You need Node.js 16 or higher. If not installed, install via your package manager or <a href="https://nodejs.org">nodejs.org</a>.</p>
        
        <h3>Check for npm</h3>
        <pre><code>npm --version</code></pre>
        <p>npm comes with Node.js.</p>

        <h2 id="rust">Installing Rust</h2>
        
        <p>If Rust is not installed, install it with rustup:</p>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Run the Rust installer</strong>
            <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></pre>
            <p>When prompted, choose option 1 (default installation).</p>
        </div>
        
        <div class="step">
            <span class="step-number">2</span>
            <strong>Load Rust into your current shell</strong>
            <pre><code>source "$HOME/.cargo/env"</code></pre>
            <p>Or close and reopen your terminal.</p>
        </div>
        
        <div class="step">
            <span class="step-number">3</span>
            <strong>Verify installation</strong>
            <pre><code>rustc --version
cargo --version</code></pre>
        </div>

        <h2 id="system-deps">System Dependencies</h2>
        
        <p>Tauri requires several system libraries for building and running apps.</p>
        
        <h3>Ubuntu / Pop!_OS / Debian</h3>
        <pre><code>sudo apt update
sudo apt install libwebkit2gtk-4.1-dev build-essential curl wget file \
  libxdo-dev libssl-dev libayatana-appindicator3-dev librsvg2-dev</code></pre>
        
        <h3>Fedora</h3>
        <pre><code>sudo dnf install webkit2gtk4.1-devel openssl-devel curl wget file \
  libappindicator-gtk3-devel librsvg2-devel</code></pre>
        
        <h3>Arch Linux</h3>
        <pre><code>sudo pacman -S webkit2gtk-4.1 base-devel curl wget file openssl \
  libappindicator-gtk3 librsvg</code></pre>
        
        <div class="note">
            <div class="note-title">Optional: ImageMagick</div>
            <p>For icon processing, you may also want ImageMagick:</p>
            <pre><code>sudo apt install imagemagick-6.q16</code></pre>
        </div>

        <h2 id="project-setup">Project Setup</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Extract or clone your Tauri project</strong>
            <pre><code>cd ~/Apps
unzip flow-notes-app.zip
cd flow-notes-app</code></pre>
        </div>
        
        <div class="step">
            <span class="step-number">2</span>
            <strong>Install npm dependencies</strong>
            <pre><code>npm install</code></pre>
        </div>

        <h2 id="icons">Setting Up Icons</h2>
        
        <p>Tauri needs a square PNG image to generate all required icon formats.</p>
        
        <div class="warning">
            <div class="warning-title">Important</div>
            <p>Your source icon must be <strong>square</strong> (same width and height). Recommended size: 1024×1024 pixels.</p>
        </div>
        
        <h3>Check if your icon is square</h3>
        <pre><code>file /path/to/your/icon.png</code></pre>
        <p>Look for dimensions like "512 x 512" — both numbers must match.</p>
        
        <h3>Make a non-square icon square (using ImageMagick)</h3>
        <pre><code># This pads the image with transparency to make it square
convert /path/to/icon.png -gravity center -background transparent \
  -extent "%[fx:max(w,h)]x%[fx:max(w,h)]" /path/to/icon-square.png</code></pre>
        
        <h3>Generate Tauri icons</h3>
        <pre><code>npx tauri icon /path/to/your/square-icon.png</code></pre>
        <p>This creates all necessary icon sizes in <code>src-tauri/icons/</code>.</p>

        <h2 id="building">Building the App</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Build the release version</strong>
            <pre><code>npm run tauri:build</code></pre>
            <p>The first build takes several minutes as Rust compiles all dependencies.</p>
        </div>
        
        <div class="step">
            <span class="step-number">2</span>
            <strong>Find your built app</strong>
            <p>After building, your app is in <code>src-tauri/target/release/bundle/</code>:</p>
            <ul>
                <li><strong>AppImage:</strong> <code>appimage/app-name_version_amd64.AppImage</code></li>
                <li><strong>Deb package:</strong> <code>deb/app-name_version_amd64.deb</code></li>
            </ul>
        </div>
        
        <div class="note">
            <div class="note-title">Development Mode</div>
            <p>For testing changes quickly (with hot reload):</p>
            <pre><code>npm run tauri:dev</code></pre>
        </div>

        <h2 id="installing">Installing the App</h2>
        
        <h3>Option A: AppImage (recommended for easy updates)</h3>
        <pre><code># Make executable
chmod +x src-tauri/target/release/bundle/appimage/your-app_1.0.0_amd64.AppImage

# Run it
./src-tauri/target/release/bundle/appimage/your-app_1.0.0_amd64.AppImage

# Or move to a permanent location
mv src-tauri/target/release/bundle/appimage/your-app_1.0.0_amd64.AppImage ~/.local/bin/your-app</code></pre>
        
        <h3>Option B: Deb package (integrates with system)</h3>
        <pre><code>sudo dpkg -i src-tauri/target/release/bundle/deb/your-app_1.0.0_amd64.deb</code></pre>
        
        <div class="success">
            <div class="success-title">Why This Works Better Than Browser PWAs</div>
            <p>Tauri apps have their own unique window class, so COSMIC DE (and other desktop environments) can properly identify the app and show the correct icon in the panel/dock — unlike Chromium PWAs which all share the same window class.</p>
        </div>

        <h2 id="window-config">Window Configuration</h2>
        
        <p>You can control the window size and behavior by editing the <code>windows</code> section in <code>src-tauri/tauri.conf.json</code>:</p>
        
        <pre><code>"windows": [
  {
    "title": "Flow Notes",
    "width": 430,
    "height": 900,
    "resizable": true,
    "minWidth": 350,
    "minHeight": 600,
    "maxWidth": 600,
    "maxHeight": 1200,
    "center": true,
    "fullscreen": false
  }
]</code></pre>
        
        <h3>Available window options</h3>
        <ul>
            <li><code>width</code> / <code>height</code> — Default window size in pixels</li>
            <li><code>minWidth</code> / <code>minHeight</code> — Minimum resize dimensions</li>
            <li><code>maxWidth</code> / <code>maxHeight</code> — Maximum resize dimensions</li>
            <li><code>resizable</code> — Whether the user can resize the window (<code>true</code> / <code>false</code>)</li>
            <li><code>center</code> — Open the window centered on screen</li>
            <li><code>fullscreen</code> — Start in fullscreen mode</li>
            <li><code>alwaysOnTop</code> — Keep window above other windows</li>
            <li><code>decorations</code> — Show window title bar and borders (<code>true</code> / <code>false</code>)</li>
        </ul>
        
        <div class="warning">
            <div class="warning-title">Rebuild required</div>
            <p>Changes to <code>tauri.conf.json</code> require a rebuild and reinstall:</p>
            <pre><code>npm run tauri:build
sudo dpkg -i "src-tauri/target/release/bundle/deb/Your App_1.0.0_amd64.deb"</code></pre>
            <p>Rebuilds after the first are much faster since Rust dependencies are already compiled.</p>
        </div>

        <div class="note">
            <div class="note-title">No rebuild needed for web content</div>
            <p>If your Tauri app loads a remote URL, any changes to your hosted HTML/JS/CSS take effect automatically — no rebuild required. You only rebuild when changing the Tauri config itself (window size, icon, title, URL, etc.).</p>
        </div>

        <h2 id="troubleshooting">Troubleshooting</h2>
        
        <h3>"cargo" or "rustc" not found after installation</h3>
        <p>Run this to load Rust into your current shell:</p>
        <pre><code>source "$HOME/.cargo/env"</code></pre>
        <p>Or restart your terminal.</p>
        
        <h3>Build fails with WebKit errors</h3>
        <p>Make sure WebKitGTK is installed:</p>
        <pre><code>sudo apt install libwebkit2gtk-4.1-dev</code></pre>
        
        <h3>"source image must be a square" error</h3>
        <p>Your icon isn't square. Check dimensions with <code>file icon.png</code> and use ImageMagick to pad it (see Icons section above).</p>
        
        <h3>App runs but shows blank window</h3>
        <p>Check that the URL in <code>src-tauri/tauri.conf.json</code> is correct and accessible.</p>
        
        <h3>Icon not showing in panel</h3>
        <p>Make sure you ran <code>npx tauri icon</code> before building. If you already built, delete the <code>target</code> folder and rebuild:</p>
        <pre><code>rm -rf src-tauri/target
npm run tauri:build</code></pre>

        <hr style="border-color: var(--border); margin-top: 3rem;">
        <p class="muted" style="text-align: center;">Guide created for setting up Tauri apps on Linux with COSMIC DE</p>
    </div>
</body>
</html>
