/* ============================================
   Flow App - Synthwave Glassmorphism Theme
   ============================================ */

:root {
  /* Core backgrounds */
  --bg-void: #08090c;
  --bg-base: #0c0e14;
  --bg-glass: rgba(15, 18, 28, 0.7);
  --bg-glass-light: rgba(25, 30, 45, 0.6);
  --bg-glass-hover: rgba(35, 42, 60, 0.5);
  
  /* Glass effects */
  --glass-border: rgba(120, 140, 200, 0.1);
  
  /* Text colors */
  --text-primary: #e8eaed;
  --text-secondary: #8a92a6;
  --text-dim: #5a6275;
  
  /* Accent colors */
  --accent-blue: #7aa2d4;
  --accent-lavender: #a992c4;
  --accent-green: #7eb89a;
  --accent-cyan: #6ecfcf;
  --accent-coral: #d47a7a;
  
  /* Glows */
  --glow-blue: 0 0 20px rgba(122, 162, 212, 0.3);
  --glow-blue-soft: 0 0 15px rgba(122, 162, 212, 0.15);
  --glow-lavender: 0 0 20px rgba(169, 146, 196, 0.3);
  --glow-cyan: 0 0 20px rgba(110, 207, 207, 0.3);
  --glow-green: 0 0 15px rgba(126, 184, 154, 0.3);
  --glow-coral: 0 0 15px rgba(212, 122, 122, 0.3);
  
  /* Gradients */
  --gradient-blue: linear-gradient(135deg, var(--accent-blue), var(--accent-lavender));
  --gradient-cyan: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
  --gradient-card: linear-gradient(180deg, rgba(20, 25, 40, 0.8) 0%, rgba(12, 14, 20, 0.9) 100%);
  
  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  
  /* Border radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-pill: 9999px;
  
  /* Font sizes */
  --font-xs: 0.875rem;
  --font-sm: 1rem;
  --font-md: 1.125rem;
  --font-lg: 1.25rem;
  --font-xl: 1.5rem;
  
  /* Weights */
  --weight-normal: 400;
  --weight-medium: 500;
  --weight-semibold: 600;
  
  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 250ms ease;
  
  /* Layout */
  --nav-height: 65px;
}

/* Reset */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html { font-size: 16px; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: var(--font-md);
  line-height: 1.5;
  color: var(--text-primary);
  background: var(--bg-void);
  background-image: 
    radial-gradient(ellipse at 20% 20%, rgba(122, 162, 212, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(169, 146, 196, 0.08) 0%, transparent 50%);
  min-height: 100vh;
  overflow-x: hidden;
}

:focus-visible {
  outline: 2px solid var(--accent-blue);
  outline-offset: 2px;
}

:focus:not(:focus-visible) { outline: none; }

/* App Container */
.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  overflow: hidden;
}

.panels-wrapper {
  flex: 1;
  display: flex;
  overflow: hidden;
  min-height: 0;
}

/* Panel Base */
.panel {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.panel-header {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-lg);
  background: var(--bg-glass);
  backdrop-filter: blur(10px);
}

.panel-header h1 {
  font-size: var(--font-lg);
  font-weight: var(--weight-semibold);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.panel-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.panel-content::-webkit-scrollbar { width: 6px; }
.panel-content::-webkit-scrollbar-track { background: transparent; }
.panel-content::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 3px; }

/* Mobile Layout - iPad mini and smaller */
@media (max-width: 767px) {
  .panels-wrapper {
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    padding-bottom: 80px; /* Space for floating nav */
    height: 100%;
  }
  .panels-wrapper::-webkit-scrollbar { display: none; }
  
  /* On mobile, left-column should act as inline contents */
  .left-column {
    display: contents;
  }
  
  .panel {
    flex: 0 0 100%;
    scroll-snap-align: center;
    min-width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  /* Panel content should scroll on mobile */
  .panel-content {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Reorder panels for swipe: Scratchpad, Lists, Notes */
  .panel-scratchpad { order: 1; }
  .panel-lists { order: 2; }
  .panel-notes { order: 3; }
  
  /* Reset scratchpad to show content on mobile */
  .panel-scratchpad .panel-content {
    display: flex;
  }
  
  .panel-scratchpad .panel-header {
    padding: var(--space-sm) var(--space-lg);
  }
  
  .accordion-indicator { display: none; }
}

/* Desktop Layout - larger than iPad mini */
@media (min-width: 768px) {
  .panels-wrapper {
    display: grid;
    grid-template-columns: minmax(320px, 38%) 1fr;
    grid-template-rows: 1fr;
  }
  
  /* Left column is a flex container that fills the grid cell */
  .left-column {
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
  }
  
  /* Panels in left column - start with no flex growth */
  .left-column .panel {
    flex: 0 0 auto;
  }
  
  /* Scratchpad content hidden by default on desktop */
  .panel-scratchpad .panel-content {
    display: none;
  }
  
  .panel-scratchpad .panel-header {
    cursor: pointer;
    padding: var(--space-xs) var(--space-lg);
  }
  
  .panel-notes { 
    min-height: 0;
    overflow: hidden;
  }
  
  /* Collapsed state */
  .panel-lists.collapsed .panel-content,
  .panel-scratchpad.collapsed .panel-content { 
    display: none; 
  }
  
  .panel-lists.collapsed .panel-header,
  .panel-scratchpad.collapsed .panel-header { 
    cursor: pointer;
    padding: var(--space-xs) var(--space-lg);
  }
  
  .panel-lists.collapsed .panel-header:hover,
  .panel-scratchpad.collapsed .panel-header:hover { 
    background: var(--bg-glass-hover); 
  }
  
  /* Expanded state - fill remaining space */
  .panel-lists.expanded,
  .panel-scratchpad.expanded { 
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden;
  }
  
  /* Show content when expanded */
  .panel-lists.expanded .panel-content,
  .panel-scratchpad.expanded .panel-content {
    display: flex;
  }
  
  .panel-lists.expanded .panel-header,
  .panel-scratchpad.expanded .panel-header {
    padding: var(--space-sm) var(--space-lg);
    cursor: pointer;
  }
  
  .accordion-indicator {
    display: inline-flex;
    color: var(--text-dim);
    font-size: var(--font-xs);
    transition: transform var(--transition-fast);
  }
  
  .collapsed .accordion-indicator { transform: rotate(-90deg); }
  
  .search-bar { flex: 1; max-width: 280px; margin-left: auto; }
}

/* Bottom Navigation - Mobile Only, Floating Glass Bubble */
.bottom-nav {
  position: fixed;
  bottom: var(--space-lg);
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  background: rgba(15, 18, 28, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-pill);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 20px rgba(122, 162, 212, 0.1);
  z-index: 100;
}

/* Hide on tablet and desktop */
@media (min-width: 768px) {
  .bottom-nav {
    display: none;
  }
}

.nav-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: var(--space-sm) var(--space-md);
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
  min-width: 60px;
  min-height: 44px;
}

.nav-btn:hover { color: var(--text-primary); background: var(--bg-glass-hover); }
.nav-btn.active { color: var(--accent-blue); text-shadow: var(--glow-blue-soft); }
.nav-icon { width: 22px; height: 22px; }
.nav-label { font-size: var(--font-xs); font-weight: var(--weight-medium); }

/* Search Bar */
.search-bar { width: 100%; }

.search-bar input {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-pill);
  color: var(--text-primary);
  font-size: var(--font-sm);
}

.search-bar input::placeholder { color: var(--text-dim); }
.search-bar input:focus { border-color: var(--accent-blue); box-shadow: var(--glow-blue-soft); }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-lg);
  font-size: var(--font-sm);
  font-weight: var(--weight-medium);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
  min-height: 44px;
}

.btn-add {
  width: 100%;
  background: transparent;
  color: var(--accent-green);
  border: 1px dashed rgba(126, 184, 154, 0.3);
  margin-top: auto;
}

.btn-add:hover {
  background: rgba(126, 184, 154, 0.1);
  border-color: var(--accent-green);
  box-shadow: var(--glow-green);
}

.btn-icon { font-size: var(--font-lg); line-height: 1; }

.btn-primary { background: var(--gradient-blue); color: var(--bg-void); }
.btn-primary:hover { box-shadow: var(--glow-blue); }

.btn-secondary { background: var(--bg-glass-light); color: var(--text-primary); border: 1px solid var(--glass-border); }
.btn-secondary:hover { background: var(--bg-glass-hover); }

.btn-danger { background: var(--accent-coral); color: var(--bg-void); }
.btn-danger:hover { box-shadow: var(--glow-coral); }

.btn-small { padding: var(--space-xs) var(--space-sm); font-size: var(--font-xs); min-height: 36px; }

.btn-icon-only {
  padding: var(--space-sm);
  background: transparent;
  color: var(--text-dim);
  border: none;
  border-radius: var(--radius-sm);
}

.btn-icon-only:hover { color: var(--text-primary); background: var(--bg-glass-hover); }
.btn-icon-only svg { width: 18px; height: 18px; }

/* Lists Panel */
.panel-lists .panel-header h1 { color: var(--accent-blue); text-shadow: var(--glow-blue-soft); }

.lists-container {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.category {
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: var(--transition-fast);
}

.category:hover {
  border-color: rgba(122, 162, 212, 0.3);
  box-shadow: var(--glow-blue-soft);
}

.category-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-md);
  cursor: pointer;
}

.category-header:hover { background: var(--bg-glass-hover); }

.category-title {
  font-size: var(--font-md);
  font-weight: var(--weight-semibold);
  color: var(--accent-blue);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.shared-badge { font-size: var(--font-xs); color: var(--accent-lavender); }
.category-actions { display: flex; align-items: center; gap: var(--space-xs); }

.category-toggle {
  color: var(--text-dim);
  font-size: var(--font-xs);
  transition: transform var(--transition-fast);
}

.category.expanded .category-toggle { transform: rotate(180deg); }

.category-content { display: none; padding: var(--space-sm) var(--space-md) var(--space-md); }
.category.expanded .category-content { display: block; }

.sublist {
  margin-top: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: rgba(122, 162, 212, 0.05);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: var(--radius-md);
  border: 1px solid rgba(122, 162, 212, 0.1);
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.03);
}

.sublist:hover {
  background: rgba(122, 162, 212, 0.08);
  border-color: rgba(122, 162, 212, 0.15);
}

.sublist-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-sm); }
.sublist-title { font-size: var(--font-sm); font-weight: var(--weight-medium); }
.sublist-actions { display: flex; gap: var(--space-xs); }

.checklist { display: flex; flex-direction: column; gap: var(--space-xs); }

.checklist-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  border-radius: var(--radius-sm);
}

.checklist-item:hover { background: var(--bg-glass-hover); }

/* Custom Synthwave Checkbox */
.checklist-item input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  width: 22px;
  height: 22px;
  border: 2px solid var(--accent-cyan);
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
  position: relative;
}

.checklist-item input[type="checkbox"]:hover {
  box-shadow: 0 0 12px rgba(110, 207, 207, 0.4);
}

.checklist-item input[type="checkbox"]:checked {
  background: var(--gradient-cyan);
  border-color: var(--accent-cyan);
  box-shadow: 0 0 15px rgba(110, 207, 207, 0.5);
}

.checklist-item input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 8px;
  height: 8px;
  background: var(--bg-void);
  border-radius: 50%;
}

.checklist-item label { flex: 1; font-size: var(--font-sm); cursor: pointer; }
.checklist-item.checked label { text-decoration: line-through; color: var(--text-dim); }

.checklist-item .delete-item {
  opacity: 0;
  padding: var(--space-xs);
  background: transparent;
  border: none;
  color: var(--text-dim);
  cursor: pointer;
}

.checklist-item:hover .delete-item { opacity: 1; }
.checklist-item .delete-item:hover { color: var(--accent-coral); }

.add-item-form { display: flex; gap: var(--space-sm); margin-top: var(--space-sm); }

.add-item-form input {
  flex: 1;
  padding: var(--space-sm);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: var(--font-sm);
}

.add-item-form input::placeholder { color: var(--text-dim); }
.add-item-form input:focus { border-color: var(--accent-cyan); box-shadow: 0 0 10px rgba(110, 207, 207, 0.2); }

.clear-completed {
  margin-top: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  background: transparent;
  border: none;
  color: var(--text-dim);
  font-size: var(--font-xs);
  cursor: pointer;
}

.clear-completed:hover { color: var(--accent-coral); }

/* Notes Panel */
.panel-notes .panel-header h1 { color: var(--accent-lavender); text-shadow: var(--glow-lavender); }

.tags-filter { display: flex; flex-wrap: wrap; gap: var(--space-sm); padding-bottom: var(--space-md); }
.tags-filter:empty { display: none; }

.tag-filter-btn {
  padding: var(--space-xs) var(--space-sm);
  background: transparent;
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-pill);
  color: var(--text-secondary);
  font-size: var(--font-xs);
  cursor: pointer;
}

.tag-filter-btn:hover {
  border-color: var(--accent-lavender);
  color: var(--accent-lavender);
  box-shadow: 0 0 10px rgba(169, 146, 196, 0.2);
}

.tag-filter-btn.active { background: var(--accent-lavender); border-color: var(--accent-lavender); color: var(--bg-void); }

.notes-grid {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  flex: 1;
}

/* Only go to 2 columns on very wide screens */
@media (min-width: 1400px) {
  .notes-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    align-content: start;
  }
}

.note-card {
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  cursor: pointer;
  transition: var(--transition-fast);
  position: relative;
  min-height: 250px;
  max-height: 400px;
  display: flex;
  flex-direction: column;
}

.note-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(169, 146, 196, 0.3), transparent);
}

.note-card:hover {
  border-color: rgba(169, 146, 196, 0.4);
  box-shadow: var(--glow-lavender);
  transform: translateY(-2px);
}

.note-card-title { font-size: var(--font-md); font-weight: var(--weight-semibold); margin-bottom: var(--space-sm); }

.note-card-preview {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  line-height: 1.6;
  flex: 1;
  overflow-y: auto;
  margin-bottom: var(--space-sm);
  word-break: break-word;
}

/* Markdown styling in note preview */
.note-card-preview p {
  margin: 0 0 var(--space-sm) 0;
}

.note-card-preview p:last-child {
  margin-bottom: 0;
}

.note-card-preview h2,
.note-card-preview h3,
.note-card-preview h4 {
  color: var(--text-primary);
  margin: var(--space-sm) 0 var(--space-xs) 0;
  font-weight: var(--weight-semibold);
}

.note-card-preview h2 { font-size: var(--font-md); }
.note-card-preview h3 { font-size: var(--font-sm); }
.note-card-preview h4 { font-size: var(--font-sm); opacity: 0.9; }

.note-card-preview strong {
  color: var(--text-primary);
  font-weight: var(--weight-semibold);
}

.note-card-preview em {
  font-style: italic;
}

.note-card-preview code {
  background: var(--bg-glass);
  padding: 0.1em 0.3em;
  border-radius: var(--radius-sm);
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
  font-size: 0.9em;
  color: var(--accent-cyan);
}

.note-card-preview del {
  opacity: 0.6;
  text-decoration: line-through;
}

.note-card-preview ul {
  margin: 0.25em 0;
  padding-left: 1.2em;
  list-style-type: disc;
}

.note-card-preview li {
  margin: 0;
  padding: 0;
  line-height: 1.35;
}

.note-card-tags { display: flex; flex-wrap: wrap; gap: var(--space-xs); margin-top: auto; padding-top: var(--space-sm); }

.tag {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-pill);
  font-size: var(--font-xs);
  font-weight: var(--weight-medium);
}

.tag-purple { background: rgba(169, 146, 196, 0.2); color: #c4b2d4; border: 1px solid rgba(169, 146, 196, 0.3); }
.tag-blue { background: rgba(122, 162, 212, 0.2); color: #9ab8e0; border: 1px solid rgba(122, 162, 212, 0.3); }
.tag-green { background: rgba(126, 184, 154, 0.2); color: #9ed0b4; border: 1px solid rgba(126, 184, 154, 0.3); }
.tag-cyan { background: rgba(110, 207, 207, 0.2); color: #8ee0e0; border: 1px solid rgba(110, 207, 207, 0.3); }
.tag-coral { background: rgba(212, 122, 122, 0.2); color: #e09a9a; border: 1px solid rgba(212, 122, 122, 0.3); }
.tag-amber { background: rgba(212, 180, 122, 0.2); color: #e0cc9a; border: 1px solid rgba(212, 180, 122, 0.3); }

/* Scratchpad Panel */
.panel-scratchpad .panel-header h1 { color: var(--accent-cyan); text-shadow: var(--glow-cyan); }

.scratchpad-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-md);
}

.clipboard-slot {
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  position: relative;
}

.clipboard-slot::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(110, 207, 207, 0.3), transparent);
}

.clipboard-slot:hover {
  border-color: rgba(110, 207, 207, 0.4);
  box-shadow: var(--glow-cyan);
}

.clipboard-slot textarea {
  width: 100%;
  min-height: 100px;
  padding: var(--space-sm);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--font-sm);
  resize: vertical;
}

.clipboard-slot textarea:focus {
  border-color: var(--accent-cyan);
  box-shadow: 0 0 12px rgba(110, 207, 207, 0.25);
}

.clipboard-actions { display: flex; gap: var(--space-sm); flex-wrap: wrap; }
.clipboard-actions .btn { flex: 1; min-width: 100px; }

.btn-copy { background: transparent; color: var(--accent-cyan); border: 1px solid rgba(110, 207, 207, 0.4); }
.btn-copy:hover { background: rgba(110, 207, 207, 0.1); box-shadow: 0 0 12px rgba(110, 207, 207, 0.3); }

.btn-copy-plain { background: transparent; color: var(--text-secondary); border: 1px solid var(--glass-border); }
.btn-copy-plain:hover { color: var(--text-primary); background: var(--bg-glass-hover); }

.clipboard-delete {
  position: absolute;
  top: var(--space-sm);
  right: var(--space-sm);
  width: 28px;
  height: 28px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-glass);
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-dim);
  cursor: pointer;
  opacity: 0;
}

.clipboard-slot:hover .clipboard-delete { opacity: 1; }
.clipboard-delete:hover { color: var(--accent-coral); background: rgba(212, 122, 122, 0.1); }

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(8, 9, 12, 0.9);
  backdrop-filter: blur(5px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-lg);
  z-index: 1000;
}

.modal-overlay[hidden] { display: none; }

.modal {
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 600px;
  max-height: 95vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 60px rgba(122, 162, 212, 0.15);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-md) var(--space-lg);
}

.modal-title { font-size: var(--font-lg); font-weight: var(--weight-semibold); color: var(--accent-blue); }

.modal-close {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-dim);
  font-size: var(--font-xl);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.modal-close:hover { color: var(--text-primary); background: var(--bg-glass-hover); }

.modal-body { flex: 1; overflow-y: auto; padding: 0 var(--space-lg) var(--space-lg); }
.modal-footer { display: flex; justify-content: flex-end; gap: var(--space-sm); padding: var(--space-md) var(--space-lg); }

.form-group { margin-bottom: var(--space-md); }
.form-group label { display: block; margin-bottom: var(--space-xs); font-size: var(--font-sm); color: var(--text-secondary); }

.form-group input,
.form-group textarea {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-family: inherit;
  font-size: var(--font-sm);
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: var(--accent-blue);
  box-shadow: var(--glow-blue-soft);
}

.form-group textarea { min-height: 300px; resize: vertical; }
.form-group .hint { margin-top: var(--space-xs); font-size: var(--font-xs); color: var(--text-dim); }

.tags-input-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  padding: var(--space-sm);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  min-height: 44px;
}

.tags-input-container:focus-within { border-color: var(--accent-lavender); box-shadow: 0 0 10px rgba(169, 146, 196, 0.2); }
.tags-input-container .tag { display: flex; align-items: center; gap: var(--space-xs); }
.tags-input-container .tag .remove-tag { background: transparent; border: none; color: inherit; cursor: pointer; padding: 0; opacity: 0.7; }
.tags-input-container .tag .remove-tag:hover { opacity: 1; }
.tags-input-container input { flex: 1; min-width: 100px; padding: var(--space-xs); background: transparent; border: none; color: var(--text-primary); font-size: var(--font-sm); }
.tags-input-container input:focus { outline: none; }

/* Confirmation Dialog */
.confirm-overlay {
  position: fixed;
  inset: 0;
  background: rgba(8, 9, 12, 0.9);
  backdrop-filter: blur(5px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-lg);
  z-index: 1001;
}

.confirm-overlay[hidden] { display: none; }

.confirm-dialog {
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  max-width: 400px;
  text-align: center;
  box-shadow: 0 0 40px rgba(212, 122, 122, 0.15);
}

.confirm-message { font-size: var(--font-md); margin-bottom: var(--space-lg); }
.confirm-actions { display: flex; justify-content: center; gap: var(--space-sm); }

/* Toast */
.toast {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-lg);
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
  z-index: 999;
}

@media (min-width: 768px) {
  .toast {
    bottom: var(--space-lg);
  }
}

.toast[hidden] { display: none; }
.toast-message { font-size: var(--font-sm); }
.toast-action { padding: var(--space-xs) var(--space-sm); background: var(--accent-blue); border: none; border-radius: var(--radius-sm); color: var(--bg-void); font-size: var(--font-xs); cursor: pointer; }
.toast-action:hover { box-shadow: var(--glow-blue-soft); }

/* Empty State */
.empty-state { text-align: center; padding: var(--space-xl); color: var(--text-secondary); }
.empty-state-icon { margin-bottom: var(--space-md); opacity: 0.4; }
.empty-state-icon svg { width: 48px; height: 48px; stroke: var(--text-dim); }
.empty-state-message { font-size: var(--font-md); }

/* Utilities */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
.hidden { display: none !important; }

/* ============================================
   Login Screen
   ============================================ */
.login-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-lg);
  background: var(--bg-void);
  background-image: 
    radial-gradient(ellipse at 30% 20%, rgba(122, 162, 212, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 80%, rgba(169, 146, 196, 0.1) 0%, transparent 50%);
}

.login-container.hidden { display: none; }

.login-card {
  width: 100%;
  max-width: 380px;
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  box-shadow: 0 0 60px rgba(122, 162, 212, 0.1);
}

.login-header {
  text-align: center;
  margin-bottom: var(--space-xl);
}

.login-logo {
  width: 72px;
  height: 72px;
  margin-bottom: var(--space-md);
  border-radius: var(--radius-md);
}

.login-title {
  font-size: var(--font-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-xs);
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-lavender));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.login-subtitle {
  color: var(--text-secondary);
  font-size: var(--font-sm);
}

.login-form .form-group {
  margin-bottom: var(--space-md);
}

.login-error {
  background: rgba(212, 122, 122, 0.1);
  border: 1px solid rgba(212, 122, 122, 0.3);
  color: var(--accent-coral);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  font-size: var(--font-sm);
  margin-bottom: var(--space-md);
}

.login-error.hidden { display: none; }

.login-btn {
  width: 100%;
  margin-top: var(--space-sm);
}

/* ============================================
   User Menu
   ============================================ */
.user-menu-btn {
  position: fixed;
  top: var(--space-md);
  right: var(--space-md);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-glass);
  backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  border-radius: 50%;
  color: var(--text-secondary);
  cursor: pointer;
  z-index: 100;
  transition: var(--transition-fast);
}

.user-menu-btn:hover {
  color: var(--text-primary);
  border-color: var(--accent-blue);
  box-shadow: var(--glow-blue-soft);
}

.user-menu-btn svg {
  width: 20px;
  height: 20px;
}

.user-dropdown {
  position: fixed;
  top: calc(var(--space-md) + 48px);
  right: var(--space-md);
  background: var(--gradient-card);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  padding: var(--space-sm);
  min-width: 200px;
  z-index: 100;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.user-dropdown.hidden { display: none; }

.user-info {
  padding: var(--space-sm) var(--space-md);
  border-bottom: 1px solid var(--glass-border);
  margin-bottom: var(--space-sm);
}

.user-email {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  word-break: break-all;
}

.sign-out-btn {
  width: 100%;
  justify-content: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
}

/* ============================================
   Loading Spinner
   ============================================ */
.loading-spinner {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-void);
  z-index: 9999;
}

.loading-spinner.hidden { display: none; }

.spinner {
  width: 48px;
  height: 48px;
  border: 3px solid var(--glass-border);
  border-top-color: var(--accent-blue);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ============================================
   Sharing Styles
   ============================================ */
.shared-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.15em 0.5em;
  margin-left: var(--space-sm);
  font-size: var(--font-xs);
  font-weight: var(--weight-medium);
  color: var(--accent-cyan);
  background: rgba(110, 207, 207, 0.15);
  border: 1px solid rgba(110, 207, 207, 0.3);
  border-radius: var(--radius-sm);
  vertical-align: middle;
}

.shared-users-list {
  margin-top: var(--space-md);
}

.shared-user {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-md);
  margin-top: var(--space-xs);
  background: var(--bg-glass);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
}

.shared-user-email {
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.shared-user .remove-share {
  color: var(--text-dim);
  padding: var(--space-xs);
}

.shared-user .remove-share:hover {
  color: var(--accent-coral);
  background: rgba(212, 122, 122, 0.1);
}
